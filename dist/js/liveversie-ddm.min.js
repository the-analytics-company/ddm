!function(){window._dd={};var e,n={},r={},t={},i={},o={},a={};n.events=[];try{e=window.localStorage}catch(E){}var c="dd_p_",s="dd_p_exp_";n.get=function(e,r,t){var i=f(e,window._dd);return n.cloneObject(void 0===i&&void 0!==r?!0===t?n.set(e,r):r:i)},n.set=function(e,r,t,i){return u(),!0===t&&n.persist(e,n.isInteger(i)?i:30),h(e,r),p(),r},n.erase=function(e){if(n.has(e))try{u();var r=e.split("."),t=r.pop(),i=r.join("."),o=f(i,window._dd);delete o[t],p()}catch(e){d(e,"delete",arguments)}},n.push=function(e,r){try{u();var t=n.get(e);return n.isArray(t)?h(e,t.concat(n.isArray(r)?r:[n.cloneObject(r)])):h(e,[n.cloneObject(r)]),p(),t}catch(e){d(e,"push",arguments)}},n.has=function(e){return void 0!==f(e,window._dd)},n.empty=function(e){var r=f(e,window._dd);return null==r||void 0===r||(n.isObject(r)?JSON.stringify(r)===JSON.stringify({}):n.isArray(r)?0==r.length:n.isString(r)?""===r.trim():!n.isInteger(r))},n.change=function(e,r,t,i){try{if(n.isString(t)&&(i=t,t=r),void 0===t&&(t=r),v(e,t,o,i)&&("function"==typeof r||!0!==r)){var a=f(e.replace(/\.?\*\*?$/,""),window._dd);void 0!==a&&t(a)}}catch(e){d(e,"change",arguments)}},n.trigger=function(e,r){try{var i=n.isObject(r)?r:{};i.name=e,i.timestamp=(new Date).getTime();var o=[];i.hasOwnProperty("dd")&&n.isObject(i.dd)&&(u(),n.mergeObjects(window._dd,n.cloneObject(i.dd)),o=p());for(var a=O(e,t),c=0;c<a.length;c++)for(var s=0;s<a[c].handlers.length;s++){var l=a[c].handlers[s];if(n.isObject(l)&&l.hasOwnProperty("handler"))if(l.hasOwnProperty("dependsOn")&&n.isArray(l.dependsOn)){for(var h=0,f=l.dependsOn.length;f-- >0;)h+=l.dependsOn[f]===e||n.isTriggered(l.dependsOn[f])?1:0;if(h===l.dependsOn.length&&!S(o,l.handler))try{l.hasOwnProperty("once")||!0!==l.handler(i)||(l.once=!0)}catch(e){d(e,"listener-handler",i,l.id)}}else if(!S(o,l.handler))try{l.hasOwnProperty("once")||!0!==l.handler(i)||(l.once=!0)}catch(e){d(e,"listener-handler",i,l.id)}}n.events.push(i)}catch(e){d(e,"trigger",arguments)}};var d=function(e,n,r,t){var i;try{i=JSON.stringify(r)}catch(o){i="error during serialization of arguments: "+o.message}var o={function:n,arguments:i,id:t,message:e.message?e.message:"",stack:e.stack?e.stack:""};"function"==typeof window.ddmErrorHandler&&window.ddmErrorHandler(o)};n.isTriggered=function(e){for(var r=n.events.length;r-- >0;)if(n.events[r].name===e)return!0;return!1},n.listen=function(e,r,i,o){try{if(n.isString(i)?(o=i,i=r):void 0===i&&(i=r),n.isArray(e))for(var a=e.length;a-- >0;)v(e[a],i,t,e,o);else v(e,i,t,o);if("boolean"!=typeof r||"boolean"==typeof r&&!1!==r)for(var c={},s=0;s<n.events.length;s++){c[n.events[s].name]=!0;for(var l=O(n.events[s].name,t),h=l.length;h-- >0;)for(var f=l[h].handlers.length;f-- >0;){var u=l[h].handlers[f];if(n.isObject(u)&&u.hasOwnProperty("handler"))if(u.hasOwnProperty("dependsOn")&&n.isArray(u.dependsOn)){for(var p=0,g=u.dependsOn.length;g-- >0;)p+=c.hasOwnProperty(u.dependsOn[g])?1:0;if(p===u.dependsOn.length&&i===u.handler)try{u.hasOwnProperty("once")||!0!==u.handler(n.events[s])||(u.once=!0)}catch(e){d(e,"listener-handler",n.events[s],u.id)}}else if(i===u.handler)try{u.hasOwnProperty("once")||!0!==u.handler(n.events[s])||(u.once=!0)}catch(e){d(e,"listener-handler",n.events[s],u.id)}}}}catch(e){d(e,"listen",arguments)}},n.unlisten=function(e,n){for(var r=t.hasOwnProperty(e)?t[e]:[],i=r.length;i-- >0;)r[i].handler===n&&r.splice(i,1)},n.persist=function(e,r){try{if(r=n.isInteger(r)?r:30,!i.hasOwnProperty(e)){var t=function(n){w(e,n,i[e])};v(e,t,a),v(e+".**",t,a)}i[e]=r,void 0!==f(e)&&w(e,f(e),r)}catch(e){d(e,"persist",arguments)}},n.unpersist=function(e){delete a[e],delete a[e+".**"],m(e)},n.setCookie=function(e,r,t,i,o){try{void 0===i&&(i="/"),void 0===o&&(o="."+P());var a="";if(n.isInteger(t)){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*t),a="; expires="+c.toUTCString()}r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),document.cookie=e+"="+r+a+";domain="+o+";path="+i}catch(e){}},n.getCookie=function(e){try{for(var n=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,t=n.length;t-- >0;){var i=n[t].split("="),o=i.slice(1).join("=");'"'===o.charAt(0)&&(o=o.slice(1,-1));try{var a=i[0].replace(r,decodeURIComponent);if(o=o.replace(r,decodeURIComponent),e===a)return o}catch(e){}}}catch(e){return}},n.removeCookie=function(e,r){n.setCookie(e,"",-100,r)},n.cookieExists=function(e){return void 0!==n.getCookie(e)},n.getUrlParam=function(e){return l(window.location.href,e)},n.getRefParam=function(e){return l(document.referrer,e)},n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isEmptyObject=function(e){return!e||null==e||void 0===e||(n.isObject(e)?JSON.stringify(e)===JSON.stringify({}):n.isArray(e)?0==e.length:n.isString(e)?""===e.trim():!n.isInteger(e))},n.cloneObject=function(e){if(void 0!==e)try{return JSON.parse(JSON.stringify(e))}catch(e){d(e,"cloneObject",arguments)}};var l=function(e,n){if(!n)return"";n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=RegExp("[\\?&]"+n+"=([^&#]*)").exec(e);return null===r?"":r[1]},h=function(e,r){return r=n.cloneObject(r),e.split(".").reduce((function(e,t,i,o){return i===o.length-1?n.isObject(e[t])&&n.isObject(r)?n.mergeObjects(e[t],r):e[t]=r:n.isObject(e[t])?e[t]:e[t]={}}),window._dd)},f=function(e,n){return n=void 0!==typeof n?n:window._dd,""==e?n:e.split(".").reduce((function(e,n){return void 0!==e?e[n]:void 0}),n)},u=function(){r=n.cloneObject(window._dd)},p=function(){var e=g(a),n=g(o);return e.concat(n)},g=function(e){var n=b(r,window._dd);n.reverse();for(var t={},i=[],o=0;o<n.length;o++)for(var a=O(n[o],e),c=0;c<a.length;c++){var s=a[c].path;if(!t.hasOwnProperty(s)){for(var l=0;l<a[c].handlers.length;l++){try{a[c].handlers[l].hasOwnProperty("once")||!0!==a[c].handlers[l].handler(f(s.replace(/\.?\*\*?$/,""),window._dd))||(a[c].handlers[l].once=!0)}catch(e){d(e,"listener-changehandler","",a[c].handlers[l].id)}i.push(a[c].handlers[l].handler)}t[s]=1}}return i},v=function(e,r,t,i,o){n.isString(i)&&(o=i,i=void 0);for(var a=t.hasOwnProperty(e)?t[e]:[],c=a.length;c-- >0;)if(a[c]===r)return!1;return a.push({handler:r,id:o,dependsOn:i}),t[e]=a,!0},O=function(e,n){var r=n.hasOwnProperty("**")?[{path:"**",handlers:n["**"]}]:[];return e.split(".").reduce((function(e,t,i,o){var a;if(i===o.length-1){a=e.concat(["*"]).join(".");var c=e.concat([t]).join(".");r=(r=r.concat(n.hasOwnProperty(a)?[{path:a,handlers:n[a]}]:[])).concat(n.hasOwnProperty(c)?[{path:c,handlers:n[c]}]:[])}else a=e.concat([t,"**"]).join("."),r=r.concat(n.hasOwnProperty(a)?[{path:a,handlers:n[a]}]:[]);return e.push(t),e}),[]),r.reverse(),r},y=function(){try{var n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==e.length}},w=function(r,t,i){if(i=n.isInteger(i)?i:30,y())try{var o=(new Date).getTime(),a=c+r,d=JSON.stringify(t),l=s+r,h=new Date(o+6e4*i).getTime();o<h?(e.setItem(a,d),e.setItem(l,h)):(e.removeItem(a),e.removeItem(l))}catch(e){}},m=function(e){w(e,null,0)};n.mergeObjects=function(e,r){for(var t in r)n.isObject(r[t])?(e[t]=n.isObject(e[t])?e[t]:{},arguments.callee(e[t],r[t])):e[t]=n.cloneObject(r[t]);return e};var j,b=function(e,n){for(var r=_(e,n),t=_(n,e),i=r.concat(t),o=[],a={},c=i.length;c-- >0;){var s=i[c];a.hasOwnProperty(s)||(a[s]=!0,o.push(s))}return o},_=function(e,r,t,i){for(var o in t=n.isArray(t)?t:[],i=n.isArray(i)?i:[],r)if(n.isObject(r[o])){var a=n.isObject(e)&&e.hasOwnProperty(o)?e[o]:void 0;void 0===a&&t.push(i.concat([o]).join(".")),_(a,r[o],t,i.concat([o]))}else n.isObject(e)&&JSON.stringify(e[o])===JSON.stringify(r[o])||t.push(i.concat([o]).join("."));return t},S=function(e,n){for(var r=e.length;r-- >0;)if(e[r]===n)return!0;return!1};String.prototype.trim||(j=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(j,"")});var P=function(){var e=window.location.hostname,n=e.split("."),r=n.length;return r>2&&(e=n[r-2]+"."+n[r-1],2==n[r-1].length&&2==n[r-2].length&&(e=n[r-3]+"."+e)),e},I=window._ddm;if(!n.isObject(I)||!n.isArray(I.events)){if(window._dd={},function(){if(y())try{var r=(new Date).getTime();for(var t in e){if(0===t.lastIndexOf(s,0)){var o=t.replace(s,"");e.hasOwnProperty(c+o)&&parseInt(e[t],10)>r?(h(o,JSON.parse(e[c+o])),i.hasOwnProperty(o)||n.persist(o)):(e.removeItem(t),e.removeItem(c+o))}/dd_p_.*/.test(t)&&"undefined"==e.getItem(t)&&e.removeItem(t)}}catch(e){}}(),n.isObject(I)&&n.isArray(I.l)&&n.isArray(I.e)){for(var A=I.l.length;A-- >0;)n.listen.apply(n,I.l[A]);for(var E=0;E<I.e.length;E++)n.trigger.apply(n,I.e[E])}window._ddm=n}}();
